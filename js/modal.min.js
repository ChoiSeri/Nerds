const contactsOpen=document.querySelector(".contacts-mail"),contactsPopup=document.querySelector(".modal-window"),contactsClose=contactsPopup.querySelector(".modal-close"),contactsName=contactsPopup.querySelector("[name=forename]"),contactsEmail=contactsPopup.querySelector("[name=email]"),contactsText=contactsPopup.querySelector("[name=message]"),contactsForm=contactsPopup.querySelector(".modal-form");let isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(t){isStorageSupport=!1}contactsOpen.addEventListener("click",function(t){t.preventDefault(),contactsPopup.classList.add("modal-window-current"),contactsName.value=storageName,contactsEmail.value=storageEmail,(storageName?storageEmail?contactsText:contactsEmail:contactsName).focus()}),contactsClose.addEventListener("click",function(t){t.preventDefault(),contactsPopup.classList.remove("modal-window-current"),contactsPopup.classList.remove("modal-window-error")}),contactsForm.addEventListener("submit",function(t){contactsName.value&&contactsEmail.value?isStorageSupport&&(localStorage.setItem("name",contactsName.value),localStorage.setItem("email",contactsEmail.value)):(t.preventDefault(),contactsPopup.classList.remove("modal-window-error"),contactsPopup.offsetWidth=contactsPopup.offsetWidth,contactsPopup.classList.add("modal-window-error"))}),window.addEventListener("keydown",function(t){27===t.keyCode&&contactsPopup.classList.contains("modal-window-current")&&(t.preventDefault(),contactsPopup.classList.remove("modal-window-current"),contactsPopup.classList.remove("modal-window-error"))});